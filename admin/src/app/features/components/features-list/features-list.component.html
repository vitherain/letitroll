<div class="table-container mat-elevation-z8">
  <div class="spinner-container" *ngIf="dataSource.loading$ | async">
    <mat-spinner></mat-spinner>
  </div>

  <mat-table #table [dataSource]="dataSource" matSort>
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <span class="feature-name">{{element.feature.name}}</span>
      </mat-cell>
    </ng-container>

    <!-- Added Column -->
    <ng-container matColumnDef="added">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Added </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <span class="additional-info-available"
              [matTooltip]="(element.feature.addedTime | date: defaultTimeFormat) + ' by ' + element.feature.maintainer.username"
              matTooltipPosition="below">
          {{element.feature.addedTime | date}}
        </span>
      </mat-cell>
    </ng-container>

    <!-- Key Column -->
    <ng-container matColumnDef="key">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Key </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <span class="copiable"
              ngxClipboard [cbContent]="element.feature.key"
              matTooltip="Copy to clipboard" matTooltipPosition="below">
          {{element.feature.key}}
        </span>
      </mat-cell>
    </ng-container>

    <!-- Targeting Column -->
    <ng-container matColumnDef="targeting">
      <mat-header-cell *matHeaderCellDef> Targeting </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <mat-slide-toggle color="primary" [checked]="element.turnedOn"></mat-slide-toggle>
      </mat-cell>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <button mat-button color="primary">
          <i class="material-icons">mode_edit</i>
          Edit
        </button>
        <button mat-button color="warn" (click)="openDeleteDialog(element)">
          <i class="material-icons">delete_sweep</i>
          Delete
        </button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>

  <mat-paginator #paginator
                 [pageSize]="defaultPageSize"
                 [pageSizeOptions]="defaultPageSizeOptions"
                 [showFirstLastButtons]="true">
  </mat-paginator>
</div>
